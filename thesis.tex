\documentclass[phd,icsa,twoside,logo,11pt]{infthesis}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[numbers]{natbib}
\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{calligra}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{mathptmx}
\usepackage{enumitem}
\usepackage{pgfplots}
\usepackage{tabularx}
\usepackage{courier}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

\usetikzlibrary{patterns}
\pgfplotsset{compat=1.13}

\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\hyphenpenalty=100000

\makeatletter
\newcommand{\tcb@cnt@theoremautorefname}{Theorem}
\makeatother

\makeatletter
\newcommand{\tcb@cnt@definitionautorefname}{Definition}
\makeatother

\makeatletter
\newcommand{\tcb@cnt@notationautorefname}{Notation}
\makeatother

\makeatletter
\newcommand{\algorithmautorefname}{Algorithm}
\makeatother

\newtcbtheorem[auto counter,number within=chapter]{theorem}{Theorem}{
label type=theorem,
colback=white,
colframe=black,
fonttitle=\bfseries,
title={Theorem \thetcbcounter}}{theo}

\newtcbtheorem[auto counter,number within=chapter]{definition}{Definition}{
label type=definition,
colback=white,
colframe=black,
fonttitle=\bfseries,
title={Definition \thetcbcounter}}{def}

\newtcbtheorem[auto counter,number within=chapter]{notation}{Notation}{
label type=notation,
colback=white,
colframe=black,
fonttitle=\bfseries,
title={Definition \thetcbcounter}}{not}

\newtcolorbox{blackbox}[1]{
top=0mm,
bottom=0mm,
left=0mm,
right=0mm,
boxsep=0mm,
toptitle=1mm,
bottomtitle=1mm,
colback=black,
colframe=black,
fonttitle=\centering\bfseries,
title=#1}

\newtcolorbox{blackwhitebox}[1]{
colback=white,
colframe=black,
fonttitle=\centering\bfseries,
title=#1}

\newtcolorbox{graybox}[0]{
top=0mm,
bottom=0mm,
left=0mm,
right=0mm,
colback=white!90!black,
colbacktitle=white!90!black,
colframe=white!50!black,
lower separated=false
}

\definecolor{sh_comment}{rgb}{0.65, 0.00, 0.00 }
\definecolor{sh_keyword}{rgb}{0.15, 0.25, 0.25}
\definecolor{sh_string}{rgb}{0.08, 0.69, 0.08}

\lstset{
basicstyle         = \linespread{1}\ttfamily,
stringstyle        = \color{sh_string},
keywordstyle       = \color{sh_keyword}\bfseries,
commentstyle       = \color{sh_comment}\itshape,
numbers            = left,
numberstyle        = \scriptsize,
numbersep          = 10pt,
xleftmargin        = 1.5em,
frame              = lines,
framexleftmargin   = 1.5em,
framexbottommargin = 0em,
escapeinside       = {([}{])}
}

\lstdefinelanguage{CAnDL}
{
morekeywords = { Constraint, with, opcode, collect, include, function\_name,
                 data\_type, ir\_type, domination, strict\_domination,
                 calculated\_from, control\_origin, data\_origin, End },
morecomment  = [s]{\{}{\}}
}

\lstdefinelanguage{constraints}
{
morekeywords = { Constraint, with, and, or, at, as, End },
morecomment  = [s]{\{}{\}}
}

\lstdefinelanguage{LiLAC}
{
morekeywords = { HARNESS, IMPLEMENTS, Marshalling, PersistentVariables,
                 BeforeFirstExecution, AfterLastExecution, CppHeaderFiles,
                 INPUT, OUTPUT, COMPUTATION},
morekeywords = [2]{ CudaRead, CudaWrite, spmv_csr, Maximum, cuda, mkl,
                    dotproduct},
morekeywords = [3]{ out, in, size },
morecomment  = [s]{"}{"}
}

\title{From Constraint Programming\\to Heterogeneous Parallelism}
\author{Philip Ginsbach}

\abstract{
    The scaling limitations of homogeneous processing make it necesary for
    many applications to utilise heterogeneous paralellism.
    This includes graphics processors and increasingly also deep learning
    accelerators.
    However, where compilers are able to map programs onto homogeneous
    processors efficiently, heterogeneous acceleration is often only accessible
    via libraries and domain specific languages.
    This requires application rewrites, and the constantly changing hardware
    landscape puts into question many of the achievements in portability
    and longevity of programs that are taken for granted in modern computing.

    Libraries and domain specific languages are able to efficiently target
    accelerators, because they provide narrower interfaces.
    The more restrictive semantics of domain specific languages give their
    compilers more powerful models to analyse the program, making to possible to
    apply domain specific optimisations.
    Furthermore, they can be specialised to specific hardware and might use
    autotuning capabilites.
    The same is true for Libraries, which can be thought of as particularly
    restrictive domain specific languages.

    This thesis develops a constraint programming methodology to recognise
    narrow interfaces within programs that are written general purpose
    programming languages such as C++.
    Such narrow interfaces may be parts of the program that adhere to the
    polyhedral model, implement linear algebra routines, or fall within a large
    class of other algorithmic structures.
}

\begin{document}
\begin{preliminary}
\maketitle
\begin{acknowledgements}

\end{acknowledgements}
\begin{declaration}
    I declare that this thesis was composed by myself, that the work contained
    herein is my own except where explicitly stated otherwise in the text, and
    that this work has not been submitted for any other degree or professional
    qualification except as specified.
    Some of the material used in this thesis has been published in the following
    papers:

    \begin{itemize}
    \small
        \item Philip Ginsbach and Michael F.\ P.\ O'Boyle.\\
              {\bf Discovery and Exploitation of General Reductions: A
              Constraint Based Approach}.\\
              {\em Proceedings of the 15th Annual International
               Symposium on Code Generation and\\Optimization (CGO), 2017}
        \item Philip Ginsbach, Lewis Crawford and Michael F.\ P.\ O'Boyle.\\
              {\bf CAnDL: A Domain Specific Language for Compiler Analysis}.\\
              {\em Proceedings of the 27th International Conference on
               Compiler Construction (CC), 2018}
        \item Philip Ginsbach, Toomas Remmelg, Michel Steuwer, Bruno Bodin,
              Christophe Dubach and\\Michael F.\ P.\ O'Boyle.\\
              {\bf Automatic Matching of Legacy Code to Heterogeneous APIs: An
              Idiomatic Approach}.\\
              {\em Proceedings of the 23rd International Conference on
               Architectural Support for\\Programming Languages and Operating
               Systems (ASPLOS), 2018}
        \item Philip Ginsbach, Bruce Collie and Michael F.\ P.\ O'Boyle.\\
              {\bf Automatically Harnessing Sparse Acceleration Libraries}.\\
              In: {\em ???, 2019}
    \end{itemize}

    \par
\vspace{1in}\raggedleft({\em Philip Ginsbach})
\end{declaration}
\tableofcontents
\end{preliminary}
\chapter{Introduction}
    \label{chapter:introduction}
    \input{latex/chapter1}

\makeatletter
\@openrightfalse
\makeatother
\chapter*{List of Symbols and Notation}
    \input{latex/notation}
\makeatletter
\@openrighttrue
\makeatother

\chapter{Contraint Programming on Static Single Assignment Code}
    \label{chapter:theory}
    \input{latex/chapter2}

\chapter{Literature Survey}
    \label{chapter:literature}
    \input{latex/chapter3}

\chapter[Introducing the Compiler Analysis Description Language]
        {The Compiler Analysis Description Language
         \footnote{This chapter is based on published research in
                  \citet{Ginsbach:2018:CDS:3178372.3179515}.}}
    \label{chapter:candl}
    \input{latex/chapter4}

\chapter[Automatic Parallelisation of Complex Reductions and Histograms]
        {Automatic Parallelisation of Complex Reductions and Histograms
         \footnote{This chapter is based on published research in
                   \citet{ginsbach2017discovery}.}}
    \label{chapter:reductions}
    \input{latex/chapter5}

\chapter[Formalizing Computational Idioms for Heterogeneous Acceleration]
        {Formalizing Computational Idioms for Heterogeneous Acceleration
         \footnote{This chapter is based on published research in
                   \citet{Ginsbach:2018:AML:3173162.3173182}.}}
    \label{chapter:idioms}
    \input{latex/chapter6}

\chapter[Building a Fully integrated Idiom Specific Optimization Pipeline]
        {Building a Fully integrated Idiom Specific Optimization Pipeline
         \footnote{This chapter is based on published research in
                   \citet{lilacpaper}.}}
    \label{chapter:lilac}
    \input{latex/chapter7}

\chapter{Conclusion}
    \label{chapter:conclusion}
    \input{latex/chapter8}

\bibliographystyle{plainnat}
\bibliography{references}
\end{document}
