\documentclass[phd,icsa,twoside,logo,11pt]{infthesis}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[numbers]{natbib}
\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{calligra}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\usepackage{mathptmx}
\usepackage{enumitem}
\usepackage{pgfplots}
\usepackage{tabularx}
\usepackage{courier}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

\usetikzlibrary{patterns}
\pgfplotsset{compat=1.13}

\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\hyphenpenalty=100000

\makeatletter
\newcommand{\tcb@cnt@definitionautorefname}{Definition}
\makeatother

\makeatletter
\newcommand{\tcb@cnt@notationautorefname}{Notation}
\makeatother

\newtcbtheorem[auto counter,number within=chapter]{definition}{Definition}{
label type=definition,
colback=white,
colframe=black,
fonttitle=\bfseries,
title={Definition \thetcbcounter}}{def}

\newtcbtheorem[auto counter,number within=chapter]{notation}{Notation}{
label type=notation,
colback=white,
colframe=black,
fonttitle=\bfseries,
title={Definition \thetcbcounter}}{not}

\newtcolorbox{blackbox}[1]{
top=0mm,
bottom=0mm,
left=0mm,
right=0mm,
boxsep=0mm,
toptitle=1mm,
bottomtitle=1mm,
colback=black,
colframe=black,
fonttitle=\centering\bfseries,
title=#1}

\newtcolorbox{graybox}[0]{
top=0mm,
bottom=0mm,
left=0mm,
right=0mm,
colback=white!90!black,
colbacktitle=white!90!black,
colframe=white!50!black,
lower separated=false
}

\definecolor{sh_comment}{rgb}{0.65, 0.00, 0.00 }
\definecolor{sh_keyword}{rgb}{0.15, 0.25, 0.25}
\definecolor{sh_string}{rgb}{0.08, 0.69, 0.08}

\lstset{
basicstyle         = \linespread{1}\ttfamily,
stringstyle        = \color{sh_string},
keywordstyle       = \color{sh_keyword}\bfseries,
commentstyle       = \color{sh_comment}\itshape,
numbers            = left,
numberstyle        = \scriptsize,
numbersep          = 10pt,
xleftmargin        = 1.5em,
frame              = lines,
framexleftmargin   = 1.5em,
framexbottommargin = 0em,
escapeinside       = {([}{])}
}

\lstdefinelanguage{CAnDL}
{
morekeywords = { Constraint, with, opcode, collect, include, function\_name,
                 data\_type, ir\_type, domination, strict\_domination,
                 calculated\_from, control\_origin, data\_origin, End },
morecomment  = [s]{\{}{\}}
}

\lstdefinelanguage{constraints}
{
morekeywords = { Constraint, with, and, or, at, as, End },
morecomment  = [s]{\{}{\}}
}

\lstdefinelanguage{LiLAC}
{
morekeywords = { HARNESS, IMPLEMENTS, Marshalling, PersistentVariables,
                 BeforeFirstExecution, AfterLastExecution, CppHeaderFiles,
                 INPUT, OUTPUT, COMPUTATION},
morekeywords = [2]{ CudaRead, CudaWrite, spmv_csr, Maximum, cuda, mkl,
                    dotproduct},
morekeywords = [3]{ out, in, size },
morecomment  = [s]{"}{"}
}

\title{Compiler Analysis as Constraint Programming\\
       for Idiomatic Heterogeneous Code Acceleration}
\author{Philip Ginsbach}

\abstract{
    The end of Moores Law and the end of Dennard Scaling have required new
    approaches in hardware.
    In response, accelerator processors have become widespread, first in the
    form of general purpose graphics processing units (GPGPU) and now
    increasingly with even more deep learning accelerators.

    Heterogeneous computing platforms is the natural and necessary reaction to
    the scaling limitations of general purpose processors, but they pose a huge
    challenge to the surrounding software ecosystem.
    As opposed to microarchitectural improvements, existing software is not able
    to automatically profit from new acccelerators designs.

    A new hardware software contract is needed instead and heterogeneous
    hardware should become a responsibility of the compiler.
    While compilers have lagged behind the developments in the hardware domain,
    research into this area can profit from experience with multi-core
    processors.

    Auto-parallelizing compilers have failed to solve the problems and have only
    had major success for specific kernels and using auto-tuning.
    Heterogeneous computing is a superset of parallel computing and so an
    approach to fully automatically optimize code is unlikely.

    At the same time, a library and DSL based approach has been successful,
    however fails to become mainstream due to adoption cost.
    What is promising therefore is a combination of hand-optimized libraries
    together with compiler automatisms.

    This requires a disruptive improvement in compiler analysis capabilites.
    The detection of higher level algorithmic structures in compilers has been
    investigated before, but established approaches cannot scale to what
    this challenge requires.
    Syntactic matching on programming languages has become
    unviable for the complexities of both modern programming languages and
    complex code bases.

    Instead, this thesis develops an entirely novel approach based on concepts
    from constraint solving, building a pragmatic methodology for detecting
    complex algorithmic structures -- computational idioms.
}

\begin{document}
\begin{preliminary}
\maketitle
\begin{acknowledgements}

\end{acknowledgements}
\begin{declaration}
    I declare that this thesis was composed by myself, that the work contained
    herein is my own except where explicitly stated otherwise in the text, and
    that this work has not been submitted for any other degree or professional
    qualification except as specified.
    Some of the material used in this thesis has been published in the following
    papers:

    \begin{itemize}
    \small
        \item Philip Ginsbach and Michael F.\ P.\ O'Boyle.\\
              {\bf Discovery and Exploitation of General Reductions: A
              Constraint Based Approach}.\\
              {\em Proceedings of the 15th Annual International
               Symposium on Code Generation and\\Optimization (CGO), 2017}
        \item Philip Ginsbach, Lewis Crawford and Michael F.\ P.\ O'Boyle.\\
              {\bf CAnDL: A Domain Specific Language for Compiler Analysis}.\\
              {\em Proceedings of the 27th International Conference on
               Compiler Construction (CC), 2018}
        \item Philip Ginsbach, Toomas Remmelg, Michel Steuwer, Bruno Bodin,
              Christophe Dubach and\\Michael F.\ P.\ O'Boyle.\\
              {\bf Automatic Matching of Legacy Code to Heterogeneous APIs: An
              Idiomatic Approach}.\\
              {\em Proceedings of the 23rd International Conference on
               Architectural Support for\\Programming Languages and Operating
               Systems (ASPLOS), 2018}
        \item Philip Ginsbach, Bruce Collie and Michael F.\ P.\ O'Boyle.\\
              {\bf Automatically Harnessing Sparse Acceleration Libraries}.\\
              In: {\em ???, 2019}
    \end{itemize}

    \par
\vspace{1in}\raggedleft({\em Philip Ginsbach})
\end{declaration}
\tableofcontents
\end{preliminary}
\chapter{Introduction}
    \label{chapter:introduction}
    \input{latex/chapter1}

\chapter{Contraint Programming on Static Single Assignment Code}
    \label{chapter:theory}
    \input{latex/chapter2}

\chapter{Literature Survey}
    \label{chapter:literature}
    \input{latex/chapter3}

\chapter[Introducing the Compiler Analysis Description Language]
        {The Compiler Analysis Description Language
         \footnote{This chapter is based on published research in
                  \citet{Ginsbach:2018:CDS:3178372.3179515}.}}
    \label{chapter:candl}
    \input{latex/chapter4}

\chapter[Automatic Parallelisation of Complex Reductions and Histograms]
        {Automatic Parallelisation of Complex Reductions and Histograms
         \footnote{This chapter is based on published research in
                   \citet{ginsbach2017discovery}.}}
    \label{chapter:reductions}
    \input{latex/chapter5}

\chapter[Formalizing Computational Idioms for Heterogeneous Acceleration]
        {Formalizing Computational Idioms for Heterogeneous Acceleration
         \footnote{This chapter is based on published research in
                   \citet{Ginsbach:2018:AML:3173162.3173182}.}}
    \label{chapter:idioms}
    \input{latex/chapter6}

\chapter[Building a Fully integrated Idiom Specific Optimization Pipeline]
        {Building a Fully integrated Idiom Specific Optimization Pipeline
         \footnote{This chapter is based on published research in
                   \citet{lilacpaper}.}}
    \label{chapter:lilac}
    \input{latex/chapter7}

\chapter{Conclusion}
    \label{chapter:conclusion}
    \input{latex/chapter8}

\bibliographystyle{plainnat}
\bibliography{references}
\end{document}
