\begin{theorem}{Backtracking Solution for Element-of Constraint Problems}{theo1}
    For $S(M)\subset\mathbb N^V$, the collection $(B_k[E_S])_{k=1\dots n}$ of
    functions
    $B_k[E_S]\colon\mathcal M\times\mathbb N^{k-1}\rightarrow\mathcal P(\mathbb N)$
    is a backtracking solution of $(V,E_S)$ when defined by
    \begin{align*}
        B_k[E_S](M,x)={}&head(R_k(M,x))\\
        R_1(M)={}&\{p_n(s)\mid s\in S(M)\}\\
        R_{k+1}(M,x)={}&select(x_k,R_k(M,(x_1,\dots,x_{k-1}))).
    \end{align*}
    \tcblower
    \paragraph*{Proof:} By definition,
    $E_S(M,x)=1\iff x\in S(M)\iff p_n(x)\in R_1(M)$.\\
    It is also clear that for all $1<k\leq n$ holds
    \begin{align*}
        p_n(x)\in\{p_n(s)\mid s\in S(M)\}\iff p_n(x)\in\{p_n(s)\mid s\in S(M),p_{k-1}(s)=p_{k-1}(x)\}.
    \end{align*}
    For all $1<k\leq n$, this gives
    \begin{align*}
        E_S(M,x)=1\implies x_{v_k}\in\{s_{v_k}\mid s\in S(M),p_{k-1}(s)=p_{k-1}(x)\}=B_k[E_S](M,p_{k-1}(x)).
    \end{align*}
    This gives ``$\implies$'' for the equation in \Cref{def:backtracking}.
    The reverse is true for $k=n$, as
    \begin{align*}
        x_{v_n}\in B_n[E_S](M,p_{n-1}(x))=\{s_{v_n}\mid s\in S(M),p_{n-1}(s)=p_{n-1}(x)\}\implies x\in S(M).
    \end{align*}
    Therefore, the equivalence from \Cref{def:backtracking} holds in both directions.
\end{theorem}
\begin{theorem}{Backtracking Solution for Conjunction Constraint problems}{theo2}
    For SSA constraint problems $(V,C)$ and $(V,C')$ with backtracking
    solutions $(B_k)_{k=1\dots n}$, $(B'_k)_{k=1\dots n}$, the collection
    $(B_k[C\hspace{-0.5mm}\land\hspace{-0.5mm}C'])_{k=1\dots n}$ of functions
    \mbox{$B_k[C\hspace{-0.5mm}\land\hspace{-0.5mm}C']\colon\mathcal M\times\mathbb N^{k-1}\rightarrow\mathcal P(\mathbb N)$}
    is a backtracking solution of
    $(V,C\hspace{-0.5mm}\land\hspace{-0.5mm}C')$ when defined by
    \begin{align*}
        B_k[C\hspace{-0.5mm}\land\hspace{-0.5mm}C'](M,x)=B_k(M,x)\mathrel\cap B'_k(M,x).
    \end{align*}
    \tcblower
    \paragraph*{Proof:}
    The definition of $(V,C\hspace{-0.5mm}\land\hspace{-0.5mm} C')$ together
    with the assumption that \Cref{def:backtracking} holds for the two given
    backtracking solutions gives
    \begin{align*}
        C\hspace{-0.5mm}\land\hspace{-0.5mm}C'(M,x)=1\iff{}&\left[x_{v_k}\in B_k(M,p_{k-1}(x))\text{ for all }1\leq k\leq n\right]\\
                                            \mathrel\land{}&\left[x_{v_k}\in B'_k(M,p_{k-1}(x))\text{ for all }1\leq k\leq n\right].
    \end{align*}
    With the definition of $B_k[C\hspace{-0.5mm}\land\hspace{-0.5mm}C']$, this immediately gives
    \begin{align*}
        C\hspace{-0.5mm}\land\hspace{-0.5mm}C'(M,x)=1\iff\left[x_{v_k}\in B_k[C\hspace{-0.5mm}\land\hspace{-0.5mm}C'](M,(x_{v_1},\dots,x_{v_{k-1}}),x_{v_k})\text{ for all }1\leq k\leq n\right].
    \end{align*}
\end{theorem}
