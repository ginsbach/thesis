\begin{theorem}{Backtracking Solution for Disjunction Constraint problems}{theo4}
    For SSA constraint problems $(V,C)$ and $(V,C')$ with backtracking
    solutions $(P_k)_{k=1\dots n}$ and $(P'_k)_{k=1\dots n}$, the
    predicates $(P_k[C\mathrel\lor C'])_{k=1\dots n}$ defined by
    \begin{align*}
        P_k[C\mathrel\lor C'](M,x,y):={}&\left(R_{k,1}(M,x,y)\mathrel\land P_k(M,x,y)\right)\\
                          \mathrel\lor{}&\left(R_{k,2}(M,x,y)\mathrel\land P'_k(M,x,y)\right)
    \end{align*}
    give a backtracking solution of $(V,C\mathrel\lor C')$, were $R_k(M,x)\in\{0,1\}^2$
    is given by 
    \begin{align*}
        R_0(M)=(1,1)&&
        R_{k+1}(M,x)=\left(
            \begin{array}{l}
                R_{k,1}(M,x)\mathrel\land P_k(M,(x_1,\dots,x_{k-1}),x_k)\\
                R_{k,2}(M,x)\mathrel\land P'_k(M,(x_1,\dots,x_{k-1}),x_k)
            \end{array}\right)
    \end{align*}
    \tcblower
    \paragraph*{Proof:} The equivalence from \autoref{def:backtracking}
                        holds by assumption for the backtracking solutions
                        of $(V,C)$ and $(V,C')$.
                        With $C\mathrel\lor C'(M,x)=1\iff C(M,x)=1\mathrel\lor C'(M,x)=1$,
                        this gives
    \begin{align*}
        C\mathrel\lor C'(M,x)=1\iff{}& P_k(M,(x_{v_1},\dots,x_{v_{k-1}}),x_{v_k})=1\text{ for all }1\leq k\leq n\\
                              \mathrel\lor{}& P'_k(M,(x_{v_1},\dots,x_{v_{k-1}}),x_{v_k})=1\text{ for all }1\leq k\leq n.
    \end{align*}
    After expanding $R_k$, this directly corresponds to the definition of
    $P_n[C\mathrel\lor C']$.
    Therefore
    \begin{align*}
        C\mathrel\lor C'(M,x)=1\iff{}P_n[C\mathrel\lor C'](M,(x_{v_1},\dots,x_{v_{n-1}}),x_{v_n})=1.
    \end{align*}
    This is sufficient for the equivalence in \autoref{def:backtracking} to hold
    in both directions, as for all $1\leq k\leq n$, the definition of
    $P_k[C\mathrel\lor C']$ with expanded $R_k$ directly gives
    \begin{align*}
        P_n[C\mathrel\lor C'](M,x,y)\implies P_k[C\mathrel\lor C'](M,(x_1,\dots,x_{k-1}),x_k)\text{ for all }k.
    \end{align*}
\end{theorem}
\begin{theorem}{Backtracking Solution for Extensions of Constraint Problems}{theo3}
    For an SSA constraint problem $(V,C)$ with a backtracking
    solution $(P_k)_{k=1\dots n}$ and a set $W$ with an injection
    $i:V\hookrightarrow W$ and an order $W=\{w_1,\dots,w_n\}$ that is
    compatible with the order on $V$ in the sense that $v_k=w_{t(k)}$ with
    some $t:\mathbb N\rightarrow\mathbb N$ strictly increasing, the
    predicates $(P_k[C^W])_{k=1\dots |W|}$ defined by
    \begin{align*}
        P_k[C^W](M,x,y):=\left\{
            \begin{array}{ll}
                P_k\left(M,\left(x_{t(1)},\dots,x_{t(n)}\right),y\right)&\text{if }w_k\in V\\
                \equiv 1&\text{otherwise}\\
            \end{array}\right.
    \end{align*}
    give a backtracking solution of $(V,C^W)$.
    \tcblower
    \paragraph*{Proof:} obvious
\end{theorem}
